# update: 2026-02-09
# ç®€ä»‹: https://github.com/echs-top/proxy
providers: &providers { type: http, interval: 86400, proxy: DIRECT, header: { User-Agent: ["clash-verge/v2.4.4"] }, health-check: { enable: true, url: 'https://8.8.8.8/generate_204', expected-status: 204,  interval: 600, timeout: 3000, max-failed-times: 2, lazy: false }, exclude-filter: '(?i)å¥—é¤|å‰©ä½™|æµé‡|åˆ°æœŸ|é‡ç½®|é¢‘é“|è®¢é˜…|å®˜ç½‘|ç¦æ­¢|å®¢æˆ·ç«¯|æœ‰æ•ˆ|è”ç³»|æµ‹è¯•|èŠ‚ç‚¹|æ—¥æœŸ|ç¾¤ç»„|åŠ å…¥|é€šçŸ¥|ç»´æŠ¤|ç½‘å€|åœ°å€|ä¸‹è½½|æ›´æ–°|APP|ç™»å½•|ä¸¥ç¦|æµ·å¤–' }
proxy-providers:
  link1: { <<: *providers, url: 'è®¢é˜…é“¾æ¥1', path: ./providers/link1.yaml }
  link2: { <<: *providers, url: 'è®¢é˜…é“¾æ¥2', path: ./providers/link2.yaml }
  link3: { <<: *providers, url: 'è®¢é˜…é“¾æ¥3', path: ./providers/link3.yaml }
# åœ°åŒºåˆ†ç»„
use: &use { use: [link1,link2] }




ipv6: true
allow-lan: false
bind-address: '*'
mode: rule
log-level: error
unified-delay: true
tcp-concurrent: true
find-process-mode: off
disable-keep-alive: false
keep-alive-interval: 15
keep-alive-idle: 300
etag-support: true
# global-ua: 'Mozilla/5.0 (Linux; Android 16; K) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/144.0.7559.109 Mobile Safari/537.36'
# external-controller: 127.0.0.1:9090
# secret: 'å¯†ç '
# external-ui: ./zashboard
# external-ui-url: 'https://cdn.gh-proxy.org/https://github.com/Zephyruso/zashboard/releases/latest/download/dist.zip'
geodata-loader: standard
profile: { store-selected: true, store-fake-ip: true }
# experimental: { quic-go-disable-gso: true, quic-go-disable-ecn: true, dialer-ip4p-convert: false }
port: 0
socks-port: 0
mixed-port: 0
tproxy-port: 0
redir-port: 0
# authentication: ["ç”¨æˆ·:å¯†ç "]
tun:
  enable: true
  # device: meta
  stack: mixed
  auto-route: true
  auto-redirect: true
  auto-detect-interface: true
  strict-route: true
  dns-hijack: [any:53,tcp://any:53]
  # mtu: 9000
  # udp-timeout: 300
ip: &ip { type: http, interval: 86400, proxy: DIRECT, behavior: ipcidr, format: mrs }
domain: &domain { type: http, interval: 86400, proxy: DIRECT, behavior: domain, format: mrs }
rule-providers:
  private_ip: { <<: *ip, url: 'https://cdn.gh-proxy.org/https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/privateip.mrs',  path: ./rules/private_ip.mrs }
  AWAvenue-Ads: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/rules/mrs/AWAvenue-Ads_domain.mrs', path: ./rules/AWAvenue-Ads.mrs }
  private: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/private.mrs', path: ./rules/private.mrs }
  connectivity-check: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/connectivity-check.mrs', path: ./rules/connectivity-check.mrs }
  googlefcm: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/googlefcm.mrs', path: ./rules/googlefcm.mrs }
  bilibili: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/bilibili.mrs', path: ./rules/bilibili.mrs }
  telegram: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.mrs', path: ./rules/telegram.mrs }
  meta: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/meta.mrs', path: ./rules/meta.mrs }
  twitter: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/twitter.mrs', path: ./rules/twitter.mrs }
  tiktok: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/tiktok.mrs', path: ./rules/tiktok.mrs }
  netflix: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/netflix.mrs', path: ./rules/netflix.mrs }
  spotify: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/spotify.mrs', path: ./rules/spotify.mrs }
  ai: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/ai.mrs', path: ./rules/ai.mrs }
  google: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.mrs', path: ./rules/google.mrs }
  apple-cn: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/apple-cn.mrs', path: ./rules/apple-cn.mrs }
  microsoft-cn: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/microsoft-cn.mrs', path: ./rules/microsoft-cn.mrs }
  games-cn: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/games-cn.mrs', path: ./rules/games-cn.mrs }
  direct_domain: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/rules/mrs/direct_domain.mrs', path: ./rules/direct_domain.mrs }
  proxy: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/proxy.mrs', path: ./rules/proxy.mrs }
  cn: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/rules/mrs/cn_domain.mrs', path: ./rules/cn.mrs }
  telegram_ip: { <<: *ip, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/rules/mrs/telegram_ip.mrs', path: ./rules/telegram_ip.mrs }
  facebook_ip: { <<: *ip, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/facebook.mrs', path: ./rules/facebook_ip.mrs }
  twitter_ip: { <<: *ip, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/twitter.mrs', path: ./rules/twitter_ip.mrs }
  netflix_ip: { <<: *ip, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/netflix.mrs', path: ./rules/netflix_ip.mrs }
  google_ip: { <<: *ip, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/google.mrs', path: ./rules/google_ip.mrs }
  enhanced-FaaS-in-China_ip: { <<: *ip, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/rules/mrs/enhanced-FaaS-in-China_ip.mrs', path: ./rules/enhanced-FaaS-in-China_ip.mrs }
  direct_ip: { <<: *ip, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/rules/mrs/direct_ip.mrs', path: ./rules/direct_ip.mrs }
  cn_ip: { <<: *ip, url: 'https://cdn.gh-proxy.org/https://github.com/DustinWin/ruleset_geodata/releases/download/mihomo-ruleset/cnip.mrs', path: ./rules/cn_ip.mrs }
rules:
  - DST-PORT,5228-5230,FCM
  - RULE-SET,private_ip,DIRECT,no-resolve
  - RULE-SET,AWAvenue-Ads,REJECT
  - RULE-SET,private,DIRECT
  - RULE-SET,googlefcm,FCM
  - RULE-SET,bilibili,BILIBILI
  - RULE-SET,telegram,TELEGRAM
  - RULE-SET,meta,META
  - RULE-SET,twitter,TWITTER
  - RULE-SET,tiktok,TIKTOK
  - RULE-SET,netflix,NETFLIX
  - RULE-SET,spotify,SPOTIFY
  - RULE-SET,ai,AI
  - RULE-SET,google,GOOGLE
  - RULE-SET,apple-cn,DIRECT
  - RULE-SET,microsoft-cn,DIRECT
  - RULE-SET,games-cn,DIRECT
  - RULE-SET,direct_domain,DIRECT
  - RULE-SET,proxy,PROXY
  - RULE-SET,cn,DIRECT
  - RULE-SET,telegram_ip,TELEGRAM
  - RULE-SET,facebook_ip,META
  - RULE-SET,twitter_ip,TWITTER
  - RULE-SET,netflix_ip,NETFLIX
  - RULE-SET,google_ip,GOOGLE
  - RULE-SET,enhanced-FaaS-in-China_ip,DIRECT
  - RULE-SET,direct_ip,DIRECT
  - RULE-SET,cn_ip,DIRECT
  - MATCH,PROXY
sniffer: 
  enable: true
  force-dns-mapping: false
  parse-pure-ip: true
  override-destination: false
  sniff:
    HTTP: { ports: [80,8080-8880] }
    TLS: { ports: [443,8443] }
    QUIC: { ports: [443,8443] }
  skip-domain: ['rule-set:private']
  skip-src-address: ['rule-set:private_ip']
  skip-dst-address: ['rule-set:private_ip']
hosts:
  dns.alidns.com: [223.5.5.5,223.6.6.6,'2400:3200::1','2400:3200:baba::1']
  doh.pub: [120.53.53.53,1.12.12.21]
  dns.google: [8.8.8.8,8.8.4.4,'2001:4860:4860::8888','2001:4860:4860::8844']
  dns.quad9.net: [9.9.9.9,149.112.112.112,'2620:fe::fe','2620:fe::9']
  services.googleapis.cn: services.googleapis.com
direct-dns: &direct-dns ['https://dns.alidns.com/dns-query#DIRECT','https://doh.pub/dns-query#DIRECT&h3=false']
proxy-dns: &proxy-dns ['https://dns.google/dns-query#PROXYDNS','https://dns.quad9.net/dns-query#PROXYDNS']
dns: 
  enable: true
  cache-algorithm: arc
  ipv6: true
  prefer-h3: true
  use-hosts: true
  use-system-hosts: true
  respect-rules: false
  # listen: 0.0.0.0:1053
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-range6: fd00:bada:55ed::1/64
  # fake-ip-ttl: 5
  fake-ip-filter-mode: rule
  fake-ip-filter:
    - RULE-SET,AWAvenue-Ads,fake-ip
    - RULE-SET,private,real-ip
    - RULE-SET,connectivity-check,real-ip
    - RULE-SET,googlefcm,fake-ip
    - RULE-SET,bilibili,fake-ip
    - RULE-SET,telegram,fake-ip
    - RULE-SET,meta,fake-ip
    - RULE-SET,twitter,fake-ip
    - RULE-SET,tiktok,fake-ip
    - RULE-SET,netflix,fake-ip
    - RULE-SET,spotify,fake-ip
    - RULE-SET,ai,fake-ip
    - RULE-SET,google,fake-ip
    - RULE-SET,apple-cn,real-ip
    - RULE-SET,microsoft-cn,real-ip
    - RULE-SET,games-cn,real-ip
    - RULE-SET,direct_domain,real-ip
    - RULE-SET,proxy,fake-ip
    - RULE-SET,cn,real-ip
    - MATCH,fake-ip
  default-nameserver: [223.5.5.5,119.29.29.29]
  proxy-server-nameserver: *direct-dns
  nameserver-policy:
    'rule-set:AWAvenue-Ads': [rcode://name_error]
    'rule-set:private': *direct-dns
    'rule-set:googlefcm': *direct-dns
    'rule-set:bilibili': *direct-dns
    'rule-set:telegram': *proxy-dns
    'rule-set:meta': *proxy-dns
    'rule-set:twitter': *proxy-dns
    'rule-set:tiktok': *proxy-dns
    'rule-set:netflix': *proxy-dns
    'rule-set:spotify': *proxy-dns
    'rule-set:ai': *proxy-dns
    'rule-set:google': *proxy-dns
    'rule-set:apple-cn': *direct-dns
    'rule-set:microsoft-cn': *direct-dns
    'rule-set:games-cn': *direct-dns
    'rule-set:direct_domain': *direct-dns
    'rule-set:proxy': *proxy-dns
    'rule-set:cn': *direct-dns
  nameserver: *proxy-dns
  direct-nameserver: *direct-dns
  direct-nameserver-follow-policy: true
zl: &zl { type: select, proxies: [DIRECT,PROXY,å¸¸ç”¨|FALLBACK,é¦™æ¸¯|FALLBACK,å°æ¹¾|FALLBACK,æ–°åŠ å¡|FALLBACK,æ—¥æœ¬|FALLBACK,ç¾å›½|FALLBACK], include-all-providers: true }
dl: &dl { type: select, proxies: [PROXY,DIRECT,å¸¸ç”¨|FALLBACK,é¦™æ¸¯|FALLBACK,å°æ¹¾|FALLBACK,æ–°åŠ å¡|FALLBACK,æ—¥æœ¬|FALLBACK,ç¾å›½|FALLBACK], include-all-providers: true }
fall: &fall { type: fallback, <<: *use, hidden: true }
proxy-groups:
  - { name: PROXY, type: select, proxies: [å¸¸ç”¨|FALLBACK,é¦™æ¸¯|FALLBACK,å°æ¹¾|FALLBACK,æ–°åŠ å¡|FALLBACK,æ—¥æœ¬|FALLBACK,ç¾å›½|FALLBACK], include-all-providers: true, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/Global.webp' }
  - { name: PROXYDNS, <<: *dl, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/Server.webp' }
  - { name: FCM, <<: *zl, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/FCM_Firebase_Cloud_Messaging.webp' }
  - { name: BILIBILI, <<: *zl, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/Bilibili.webp' }
  - { name: TELEGRAM, <<: *dl, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/Telegram.webp' }
  - { name: META, <<: *dl, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/Meta_1.webp' }
  - { name: TWITTER, <<: *dl, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/X.webp' }
  - { name: TIKTOK, <<: *dl, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/TikTok.webp' }
  - { name: NETFLIX, <<: *dl, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/Netflix.webp' }
  - { name: SPOTIFY, <<: *dl, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/Spotify.webp' }
  - { name: AI, <<: *dl, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/AI.webp' }
  - { name: GOOGLE, <<: *dl, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/Google.webp' }
  - { name: å¸¸ç”¨|FALLBACK, <<: *fall, filter: '(?i)ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®åŸ|\bSG\b|\bsingapore\b|ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|\bJP\b|\bjapan\b|ğŸ‡ºğŸ‡¸|ç¾å›½|\bUS\b|\bunitedstates\b|\bunited\s?states\b', icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/lipis/flag-icons/main/flags/4x3/pc.svg' }
  - { name: é¦™æ¸¯|FALLBACK, <<: *fall, filter: '(?i)ğŸ‡­ğŸ‡°|é¦™æ¸¯|\bHK\b|\bhongkong\b|\bhong\s?kong\b', icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/lipis/flag-icons/main/flags/4x3/hk.svg' }
  - { name: å°æ¹¾|FALLBACK, <<: *fall, filter: '(?i)ğŸ‡¹ğŸ‡¼|å°æ¹¾|\bTW\b|\btaiwan\b', icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/lipis/flag-icons/main/flags/4x3/tw.svg' }
  - { name: æ–°åŠ å¡|FALLBACK, <<: *fall, filter: '(?i)ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®åŸ|\bSG\b|\bsingapore\b', icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/lipis/flag-icons/main/flags/4x3/sg.svg' }
  - { name: æ—¥æœ¬|FALLBACK, <<: *fall, filter: '(?i)ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|\bJP\b|\bjapan\b', icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/lipis/flag-icons/main/flags/4x3/jp.svg' }
  - { name: ç¾å›½|FALLBACK, <<: *fall, filter: '(?i)ğŸ‡ºğŸ‡¸|ç¾å›½|\bUS\b|\bunitedstates\b|\bunited\s?states\b', icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/lipis/flag-icons/main/flags/4x3/us.svg' }
  - { name: GLOBAL, type: select, proxies: [PROXY,PROXYDNS,FCM,BILIBILI,TELEGRAM,META,TWITTER,TIKTOK,NETFLIX,SPOTIFY,AI,GOOGLE,å¸¸ç”¨|FALLBACK,é¦™æ¸¯|FALLBACK,å°æ¹¾|FALLBACK,æ–°åŠ å¡|FALLBACK,æ—¥æœ¬|FALLBACK,ç¾å›½|FALLBACK], include-all-providers: true, hidden: true, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/Globefish.webp' }
