# update: 2026-01-20 mihomo/v1.19.19
# å¤šè®¢é˜…ã€å®Œå–„è®¾ç½®ã€åœ°åŒºåˆ†ç»„ã€Android/Windows
# è§„åˆ™ï¼šéƒ¨åˆ†MetaCubeX/meta-rules-datã€ç§‹é£å»å¹¿å‘Šã€è‡ªç”¨è¡¥å……(FCMã€äººæœºéªŒè¯ã€fake-ip_addã€ai_addã€webrtc)
# å›¾æ ‡ï¼šlipis/flag-iconsã€Vbaethon/HOMOMIX
# GITHUBåŠ é€Ÿï¼šgh-proxy
# FCM hostsè§„åˆ™æ¨è: yangFenTuoZi/fcm-hosts

# ç¦å›½å¤–QUIC/WebRTCå»ºè®®ä¼˜å…ˆâ€œ override: { udp: false} â€
# è¿è¥å•†QOSä¸¥é‡æ›´æ¨èâ€œ override: { udp: true, udp-over-tcp: true, udp-over-tcp-version: 2 } â€
providers: &providers { type: http, interval: 86400, proxy: DIRECT, health-check: { enable: true, url: 'https://8.8.8.8/generate_204', expected-status: 204,  interval: 600, timeout: 3000, max-failed-times: 2, lazy: false }, exclude-filter: '(?i)å¥—é¤|å‰©ä½™|æµé‡|åˆ°æœŸ|é‡ç½®|é¢‘é“|è®¢é˜…|å®˜ç½‘|ç¦æ­¢|å®¢æˆ·ç«¯|æœ‰æ•ˆ|è”ç³»|æµ‹è¯•|èŠ‚ç‚¹|æ—¥æœŸ|ç¾¤ç»„|åŠ å…¥|é€šçŸ¥|ç»´æŠ¤|ç½‘å€|åœ°å€|ä¸‹è½½|æ›´æ–°|APP|ç™»å½•|ä¸¥ç¦|æµ·å¤–' }
proxy-providers:
  link1: { <<: *providers, url: 'è®¢é˜…é“¾æ¥1', path: ./providers/link1.yaml }
  link2: { <<: *providers, url: 'è®¢é˜…é“¾æ¥2', path: ./providers/link2.yaml }
  link3: { <<: *providers, url: 'è®¢é˜…é“¾æ¥3', path: ./providers/link3.yaml }
# ç­–ç•¥åˆ†ç»„
use: &use { use: [link1,link2] }
# æ‰‹åŠ¨é€‰æ‹©
select: &select { use: [link3] }




ipv6: true
allow-lan: true
bind-address: '*'
mode: rule
log-level: error
unified-delay: true
tcp-concurrent: true
find-process-mode: off
disable-keep-alive: false
keep-alive-interval: 15
keep-alive-idle: 300
etag-support: true
global-ua: 'clash-verge/v2.4.4'
# external-controller: 0.0.0.0:9090
# secret: 'å¯†ç '
# external-ui: ./zashboard
# external-ui-url: 'https://cdn.gh-proxy.org/https://github.com/Zephyruso/zashboard/releases/latest/download/dist.zip'
profile: { store-selected: true, store-fake-ip: true }
experimental: { quic-go-disable-gso: true }

mixed-port: 7890
# tproxy-port: 7891
# redir-port: 7892
tun:
  enable: true
  # device: utun0
  # ç†è®º system>mixed>gvisor
  stack: system
  auto-route: true
  auto-redirect: true
  auto-detect-interface: true
  strict-route: true
  dns-hijack: [any:53,tcp://any:53]
  # mtu: 9000
  # udp-timeout: 300
hosts:
  dns.alidns.com: [223.5.5.5,223.6.6.6,'2400:3200::1','2400:3200:baba::1']
  doh.pub: [120.53.53.53,1.12.12.21]
  dns.google: [8.8.8.8,8.8.4.4,'2001:4860:4860::8888','2001:4860:4860::8844']
  dns.quad9.net: [9.9.9.9,149.112.112.112,'2620:fe::fe','2620:fe::9']
  services.googleapis.cn: services.googleapis.com
al: &al 'https://223.5.5.5/dns-query#DIRECT'
tx: &tx 'https://doh.pub/dns-query#DIRECT&h3=false'
gg: &gg 'https://8.8.8.8/dns-query#PROXYDNS&ecs=8.8.8.8/32&ecs-override=true'
q9: &q9 'https://9.9.9.9/dns-query#PROXYDNS&ecs=9.9.9.9/32&ecs-override=true'
dns: 
  enable: true
  cache-algorithm: arc
  ipv6: true
  prefer-h3: true
  use-hosts: true
  use-system-hosts: true
  respect-rules: false
  listen: 0.0.0.0:1053
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-range6: fd00:bada:55ed::1/64
  fake-ip-ttl: 2
  fake-ip-filter-mode: blacklist
  fake-ip-filter: ['*','RULE-SET:AWAvenue-Ads-Rule,private,fake-ip_add,webrtc,googlefcm,bilibili,microsoft@cn,cn']
  default-nameserver: [223.5.5.5,8.8.8.8]
  proxy-server-nameserver: [*al,*tx]
  nameserver: [*gg,*q9]
  direct-nameserver: [system,*al,*tx]
  direct-nameserver-follow-policy: true
  nameserver-policy:
    'rule-set:AWAvenue-Ads-Rule': [rcode://name_error]
    'rule-set:private,cn': [system,*al,*tx]
sniffer: 
  enable: true
  force-dns-mapping: false
  parse-pure-ip: false
  override-destination: false
  sniff:
    HTTP: { ports: [80,8080-8880] }
    TLS: { ports: [443,8443] }
    QUIC: { ports: [443,8443] }
  skip-domain: ['*','RULE-SET:AWAvenue-Ads-Rule,private,fake-ip_add,webrtc,googlefcm,verification,bilibili,biliintl,telegram,meta,twitter,tiktok,spotify,category-ai-!cn,ai_add,google,steam@cn,microsoft@cn,cn']
  force-domain: ['RULE-SET:netflix']
  skip-src-address: ['RULE-SET:private_ip,telegram_ip,facebook_ip,twitter_ip,google_ip,cn_ip']
rules:
  - RULE-SET,AWAvenue-Ads-Rule,REJECT-DROP
  - RULE-SET,private,DIRECT
  - RULE-SET,private_ip,DIRECT,no-resolve
  - DST-PORT,3478,WebRTC
  - DST-PORT,3479,WebRTC
  - DST-PORT,5349,WebRTC
  - DST-PORT,5350,WebRTC
  - DST-PORT,10000,WebRTC
  - DST-PORT,19302-19309,WebRTC
  - RULE-SET,webrtc,WebRTC
  - DST-PORT,5228,FCM
  - DST-PORT,5229,FCM
  - DST-PORT,5230,FCM
  - RULE-SET,googlefcm,FCM
  - RULE-SET,verification,BOTTEST
  - RULE-SET,bilibili,BILIBILI
  - RULE-SET,biliintl,BILIBILI
  - RULE-SET,telegram,TELEGRAM
  - RULE-SET,telegram_ip,TELEGRAM,no-resolve
  - RULE-SET,meta,META
  - RULE-SET,facebook_ip,META,no-resolve
  - RULE-SET,twitter,TWITTER
  - RULE-SET,twitter_ip,TWITTER,no-resolve
  - RULE-SET,tiktok,TIKTOK
  - RULE-SET,netflix,NETFLIX
  - RULE-SET,netflix_ip,NETFLIX,no-resolve
  - RULE-SET,spotify,SPOTIFY
  - RULE-SET,category-ai-!cn,AI
  - RULE-SET,ai_add,AI
  - RULE-SET,google,GOOGLE
  - RULE-SET,google_ip,GOOGLE,no-resolve
  - DOMAIN,steamcdn-a.akamaihd.net,STEAM-CN
  - RULE-SET,steam@cn,STEAM-CN
  - DOMAIN-SUFFIX,sharepoint.com,MICROSOFT-CN
  - RULE-SET,microsoft@cn,MICROSOFT-CN
  - RULE-SET,cn,DIRECT
  - RULE-SET,cn_ip,DIRECT
  - MATCH,PROXY
ip: &ip { type: http, interval: 86400, proxy: DIRECT, behavior: ipcidr, format: mrs }
domain: &domain { type: http, interval: 86400, proxy: DIRECT, behavior: domain, format: mrs }
rule-providers:
  AWAvenue-Ads-Rule: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/mrs/AWAvenue-Ads-Rule.mrs', path: ./rules/AWAvenue-Ads-Rule.mrs }
  private: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/private.mrs', path: ./rules/private.mrs }
  private_ip: { <<: *ip, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/private.mrs',  path: ./rules/private_ip.mrs }
  fake-ip_add: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/mrs/fake-ip_add_domain.mrs', path: ./rules/fake-ip_add.mrs }
  webrtc: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/mrs/webrtc_domain.mrs', path: ./rules/webrtc.mrs }
  googlefcm: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/mrs/googlefcm_domain.mrs', path: ./rules/googlefcm.mrs }
  verification: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/mrs/verification_domain.mrs', path: ./rules/verification.mrs }
  bilibili: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/bilibili.mrs', path: ./rules/bilibili.mrs }
  biliintl: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/biliintl.mrs', path: ./rules/biliintl.mrs }
  telegram: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.mrs', path: ./rules/telegram.mrs }
  telegram_ip: { <<: *ip, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/telegram.mrs', path: ./rules/telegram_ip.mrs }
  meta: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/meta.mrs', path: ./rules/meta.mrs }
  facebook_ip: { <<: *ip, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/facebook.mrs', path: ./rules/facebook_ip.mrs }
  twitter: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/twitter.mrs', path: ./rules/twitter.mrs }
  twitter_ip: { <<: *ip, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/twitter.mrs', path: ./rules/twitter_ip.mrs }
  tiktok: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/tiktok.mrs', path: ./rules/tiktok.mrs }
  netflix: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/netflix.mrs', path: ./rules/netflix.mrs }
  netflix_ip: { <<: *ip, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/netflix.mrs', path: ./rules/netflix_ip.mrs }
  spotify: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/spotify.mrs', path: ./rules/spotify.mrs }
  category-ai-!cn: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/category-ai-!cn.mrs', path: ./rules/category-ai-!cn.mrs }
  ai_add: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/mrs/ai_add_domain.mrs', path: ./rules/ai_add.mrs }
  google: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.mrs', path: ./rules/google.mrs }
  google_ip: { <<: *ip, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/google.mrs', path: ./rules/google_ip.mrs }
  steam@cn: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/steam@cn.mrs', path: ./rules/steam@cn.mrs }
  microsoft@cn: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/microsoft@cn.mrs', path: ./rules/microsoft@cn.mrs }
  cn: { <<: *domain, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.mrs', path: ./rules/cn.mrs }
  cn_ip: { <<: *ip, url: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.mrs', path: ./rules/cn_ip.mrs }

zl: &zl { type: select, proxies: [DIRECT,PROXY,URLTEST,å›½å¤–|FALLBACK,é¦™æ¸¯|FALLBACK,å°æ¹¾|FALLBACK,æ—¥æœ¬|FALLBACK,æ–°åŠ å¡|FALLBACK,ç¾å›½|FALLBACK,å¾·å›½|FALLBACK,è‹±å›½|FALLBACK,è·å…°|FALLBACK], <<: *select }
dl: &dl { type: select, proxies: [PROXY,DIRECT,URLTEST,å›½å¤–|FALLBACK,é¦™æ¸¯|FALLBACK,å°æ¹¾|FALLBACK,æ—¥æœ¬|FALLBACK,æ–°åŠ å¡|FALLBACK,ç¾å›½|FALLBACK,å¾·å›½|FALLBACK,è‹±å›½|FALLBACK,è·å…°|FALLBACK], <<: *select }
auto: &auto { type: url-test, tolerance: 20, <<: *use, hidden: true }
fall: &fall { type: fallback, <<: *use, hidden: true }
bal: &bal { type: load-balance, strategy: round-robin, <<: *use, hidden: true }
proxy-groups:
  - { name: PROXY, type: select, proxies: [URLTEST,å›½å¤–|FALLBACK,é¦™æ¸¯|FALLBACK,å°æ¹¾|FALLBACK,æ—¥æœ¬|FALLBACK,æ–°åŠ å¡|FALLBACK,ç¾å›½|FALLBACK,å¾·å›½|FALLBACK,è‹±å›½|FALLBACK,è·å…°|FALLBACK], <<: *select, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/Global.webp' }
  - { name: PROXYDNS, <<: *dl, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/Server.webp' }
  - { name: WebRTC, type: select, proxies: [PASS,REJECT-DROP,REJECT], icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/Forbidden.webp' }
  - { name: FCM, <<: *zl, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/FCM_Firebase_Cloud_Messaging.webp' }
  - { name: BOTTEST, <<: *dl, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/CloudFlare.webp' }
  - { name: BILIBILI, <<: *zl, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/Bilibili.webp' }
  - { name: TELEGRAM, <<: *dl, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/Telegram.webp' }
  - { name: META, <<: *dl, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/Meta_1.webp' }
  - { name: TWITTER, <<: *dl, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/X.webp' }
  - { name: TIKTOK, <<: *dl, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/TikTok.webp' }
  - { name: NETFLIX, <<: *dl, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/Netflix.webp' }
  - { name: SPOTIFY, <<: *dl, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/Spotify.webp' }
  - { name: AI, <<: *dl, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/AI.webp' }
  - { name: GOOGLE, <<: *dl, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/Google.webp' }
  - { name: STEAM-CN, <<: *zl, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/Steam.webp' }
  - { name: MICROSOFT-CN, <<: *zl, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/Microsoft.webp' }
  - { name: URLTEST, <<: *auto, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/Fast.webp' }
  - { name: å›½å¤–|FALLBACK, <<: *fall, exclude-filter: '(?i)ğŸ‡­ğŸ‡°|é¦™æ¸¯|\bHK\b|\bhongkong\b|\bhong\s?kong\b|ğŸ‡²ğŸ‡´|æ¾³é—¨|\bMO\b|\bmacau\b|\bmacao\b|ğŸ‡¹ğŸ‡¼|å°æ¹¾|\bTW\b|\btaiwan\b', icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/Network_2.webp' }
  - { name: é¦™æ¸¯|FALLBACK, <<: *fall, filter: '(?i)ğŸ‡­ğŸ‡°|é¦™æ¸¯|\bHK\b|\bhongkong\b|\bhong\s?kong\b', icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/flag/hk.svg' }
  - { name: å°æ¹¾|FALLBACK, <<: *fall, filter: '(?i)ğŸ‡¹ğŸ‡¼|å°æ¹¾|\bTW\b|\btaiwan\b', icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/flag/tw.svg' }
  - { name: æ—¥æœ¬|FALLBACK, <<: *fall, filter: '(?i)ğŸ‡¯ğŸ‡µ|æ—¥æœ¬|\bJP\b|\bjapan\b', icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/flag/jp.svg' }
  - { name: æ–°åŠ å¡|FALLBACK, <<: *fall, filter: '(?i)ğŸ‡¸ğŸ‡¬|æ–°åŠ å¡|ç‹®åŸ|\bSG\b|\bsingapore\b', icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/flag/sg.svg' }
  - { name: ç¾å›½|FALLBACK, <<: *fall, filter: '(?i)ğŸ‡ºğŸ‡¸|ç¾å›½|\bUS\b|\bunitedstates\b|\bunited\s?states\b', icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/flag/us.svg' }
  - { name: å¾·å›½|FALLBACK, <<: *fall, filter: '(?i)ğŸ‡©ğŸ‡ª|å¾·å›½|\bDE\b|\bgermany\b', icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/flag/de.svg' }
  - { name: è‹±å›½|FALLBACK, <<: *fall, filter: '(?i)ğŸ‡¬ğŸ‡§|è‹±å›½|\bUK\b|\bGB\b|\bunitedkingdom\b|\bunited\s?kingdom\b', icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/flag/gb.svg' }
  - { name: è·å…°|FALLBACK, <<: *fall, filter: '(?i)ğŸ‡³ğŸ‡±|è·å…°|\bNL\b|\bnetherlands?\b', icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/flag/nl.svg' }
  - { name: GLOBAL, type: select, proxies: [PROXY,PROXYDNS,WebRTC,FCM,BOTTEST,BILIBILI,TELEGRAM,META,TWITTER,TIKTOK,NETFLIX,SPOTIFY,AI,GOOGLE,STEAM-CN,MICROSOFT-CN,URLTEST,å›½å¤–|FALLBACK,é¦™æ¸¯|FALLBACK,å°æ¹¾|FALLBACK,æ—¥æœ¬|FALLBACK,æ–°åŠ å¡|FALLBACK,ç¾å›½|FALLBACK,å¾·å›½|FALLBACK,è‹±å›½|FALLBACK,è·å…°|FALLBACK], include-all-providers: true, hidden: true, icon: 'https://cdn.gh-proxy.org/https://raw.githubusercontent.com/echs-top/proxy/main/icon/Globefish.webp' }
